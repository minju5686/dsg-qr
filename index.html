<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta property="og:image" content="https://minju5686.github.io/dsg-qr/images/preview.png" />
  <meta property="og:title" content="ê´‘ì£¼ë™ì„±ì—¬ìì¤‘í•™êµ QR ìŠ¤íƒ¬í”„ íˆ¬ì–´" />
  <meta property="og:description" content="7ëª…ì˜ ì„ ìƒë‹˜ ìºë¦­í„° ìŠ¤íƒ¬í”„ë¥¼ ëª¨ì•„ ë¦¬ì›Œë“œë¥¼ ë°›ì•„ë³´ì„¸ìš”!" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://minju5686.github.io/dsg-qr/" />
  <link href="https://fonts.googleapis.com/css2?family=UhBee+Seulvely&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ê´‘ì£¼ë™ì„±ì—¬ìì¤‘í•™êµ QR ìŠ¤íƒ¬í”„ íˆ¬ì–´</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
  <style>
    /* (CSS ìƒëµ, ê¸°ì¡´ ìŠ¤íƒ€ì¼ ê·¸ëŒ€ë¡œ ìœ ì§€) */
  </style>
</head>
<body>

<div id="page-start">
  <h1>ê´‘ì£¼ë™ì„±ì—¬ìì¤‘í•™êµ QR ìŠ¤íƒ¬í”„ íˆ¬ì–´</h1>
  <img src="https://minju5686.github.io/dsg-qr/images/preview.png" alt="ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€" style="width:90%; max-width:320px; border-radius:12px; margin-bottom:20px;" />
  <button onclick="navigateToPage('page-form')">ì‹œì‘í•˜ê¸°</button>
</div>

<div id="page-form" class="hidden">
  <h2>ì¸ì ì‚¬í•­ ì…ë ¥</h2>
  <input type="text" id="name" placeholder="ì´ë¦„" />
  <input type="number" id="grade" placeholder="í•™ë…„" />
  <input type="number" id="classNum" placeholder="ë°˜" />
  <input type="number" id="number" placeholder="ë²ˆí˜¸" />
  <button onclick="startTour()">íˆ¬ì–´ ì‹œì‘</button>
</div>

<div id="page-stamps" class="hidden">
  <h2>ë‚´ ìŠ¤íƒ¬í”„</h2>
  <div id="stampBook"></div>
  <input type="text" id="qrInput" placeholder="QR ì½”ë“œ ì…ë ¥" />
  <button onclick="startCamera()">ë„ì¥ ì°ê¸°</button>
  <div id="qr-reader" style="width:300px; margin:20px auto; display:none;"></div>
</div>

<div id="page-complete" class="hidden">
  <h2>ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤!</h2>
  <p>7ê°œì˜ ë„ì¥ì„ ëª¨ë‘ ëª¨ì•˜ìŠµë‹ˆë‹¤!</p>
</div>

<script>
function toggleMenu() { /* ... */ }
function navigateToPage(pageId) {
  const pages = ['page-start', 'page-form', 'page-stamps', 'page-complete', 'schedule'];
  pages.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.classList.add('hidden');
  });
  document.getElementById(pageId).classList.remove('hidden');
}
function startCamera() { /* ... */ }
function startTour() { /* ... */ }
function showStamps() { /* ... */ }
function submitQR(code = null) { /* ... */ }

window.onload = () => {
  const params = new URLSearchParams(window.location.search);
  const qrCodeParam = params.get("code");
  const userInfo = JSON.parse(localStorage.getItem("userInfo"));
  if (userInfo) {
    const stampKey = `stamps_${userInfo.name}_${userInfo.grade}_${userInfo.classNum}_${userInfo.number}`;
    localStorage.setItem("stampKey", stampKey);
    if (qrCodeParam) {
      submitQR(qrCodeParam);
    } else {
      showStamps();
      navigateToPage('page-stamps');
    }
  } else {
    navigateToPage('page-start');
  }
};
</script>

</body>
</html>
